<script>
  const gallery = document.getElementById('gallery');
  const totalImages = 21;
  const batchSize = 6;
  let loadedCount = 0;

  function loadImages() {
    const end = Math.min(loadedCount + batchSize, totalImages);
    for (let i = totalImages - loadedCount; i > totalImages - end; i--) {
      const galleryItem = document.createElement('div');
      galleryItem.className = 'gallery-item';

      const img = document.createElement('img');
      img.src = `images/${i}.jpg`;
      img.alt = `Gallery Image ${i}`;
      img.onerror = () => { img.style.display = 'none'; };

      galleryItem.appendChild(img);
      gallery.appendChild(galleryItem);
    }
    loadedCount += (end - loadedCount);
  }

  // Load initial batch
  loadImages();

  // Infinite scroll
  window.addEventListener('scroll', () => {
    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 100) {
      if (loadedCount < totalImages) {
        loadImages();
      }
    }
  });

  // MOBILE Header: Guillermo R.G. + hide on scroll
  const isMobile = window.innerWidth <= 768;
  const header = document.getElementById('mobileHeader');
  const grText = document.getElementById('grText');

  if (isMobile) {
    grText.textContent = 'Guillermo R.G.';

    let lastScrollTop = 0;
    window.addEventListener("scroll", function () {
      const st = window.scrollY || document.documentElement.scrollTop;
      if (st > lastScrollTop) {
        header.style.top = "-60px"; // hide
      } else {
        header.style.top = "0"; // show
      }
      lastScrollTop = st <= 0 ? 0 : st;
    }, false);
  }
</script>
